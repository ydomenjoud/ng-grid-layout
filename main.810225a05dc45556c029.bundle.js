webpackJsonp([1],{0:function(n,t,i){n.exports=i("cDNt")},cDNt:function(n,t,i){"use strict";function o(n){return y._25(0,[(n()(),y._8(0,[["cell",1]],null,3,"article",[],[[4,"height",null],[4,"flexBasis",null]],[[null,"drop"],[null,"dragover"]],function(n,t,i){var o=!0,l=n.component;if("drop"===t){o=!1!==l.onDrop(n.context.$implicit,y._20(n,0),i)&&o}if("dragover"===t){o=!1!==l.onDragHover(n.context.$implicit,y._20(n,0),i)&&o}return o},null,null)),y._6(278528,null,0,C.c,[y.t,y.u,y.k,y.F],{ngClass:[0,"ngClass"]},null),(n()(),y._24(null,["\n    "])),(n()(),y._24(null,["\n\n  "]))],function(n,t){n(t,1,0,t.component.grid.cellType(t.context.$implicit))},function(n,t){var i=t.component;n(t,0,0,i.rowHeight+"px",100/i.cols+"%")})}function l(n){return y._25(0,[(n()(),y._8(0,null,null,2,"div",[["appGridDraggable",""]],[[4,"width",null],[4,"height",null],[4,"top",null],[4,"left",null]],[[null,"dragstart"],[null,"dragend"]],function(n,t,i){var o=!0;if("dragstart"===t){o=!1!==y._20(n,1).onDragStart(i)&&o}if("dragend"===t){o=!1!==y._20(n,1).onDragEnd(i)&&o}return o},null,null)),y._6(16384,null,0,_,[y.k,y.G],{rows:[0,"rows"],cols:[1,"cols"],grid:[2,"grid"],appGridDraggable:[3,"appGridDraggable"],item:[4,"item"]},null),(n()(),y._24(null,["\n    [","] - ","\n  "]))],function(n,t){var i=t.component;n(t,1,0,t.context.$implicit.size.rows,t.context.$implicit.size.cols,i.grid,"",t.context.$implicit)},function(n,t){var i=t.component;n(t,0,0,100*t.context.$implicit.size.cols/i.grid.config.cols+"%",t.context.$implicit.size.rows*i.rowHeight+"px",t.context.$implicit.position.row*i.rowHeight+"px",t.context.$implicit.position.col*i.gridWidth/i.grid.config.cols+"px"),n(t,2,0,t.context.$implicit.position.row+"-"+t.context.$implicit.position.col,t.context.$implicit.size.rows+"x"+t.context.$implicit.size.cols)})}function e(n){return y._25(0,[y._22(402653184,1,{gridView:0}),(n()(),y._8(0,[[1,0],["gridView",1]],null,9,"section",[],[[4,"height","px"]],null,null,null,null)),(n()(),y._24(null,["\n\n  "])),(n()(),y._24(null,["\n  "])),(n()(),y._2(16777216,null,null,1,null,o)),y._6(802816,null,0,C.d,[y.Q,y.N,y.t],{ngForOf:[0,"ngForOf"]},null),(n()(),y._24(null,["\n\n  "])),(n()(),y._24(null,["\n  "])),(n()(),y._2(16777216,null,null,1,null,l)),y._6(802816,null,0,C.d,[y.Q,y.N,y.t],{ngForOf:[0,"ngForOf"]},null),(n()(),y._24(null,["\n\n"])),(n()(),y._24(null,["\n\n"]))],function(n,t){var i=t.component;n(t,5,0,i.gridPositions),n(t,9,0,i.grid.items)},function(n,t){n(t,1,0,t.component.containerHeight)})}function r(n){return y._25(0,[(n()(),y._8(0,null,null,1,"app-grid",[],null,[["window","resize"]],function(n,t,i){var o=!0;if("window:resize"===t){o=!1!==y._20(n,1).onResize(i.target)&&o}return o},e,x)),y._6(638976,null,0,b,[y.k],null,null)],function(n,t){n(t,1,0)},null)}function s(n){return P._25(0,[P._22(402653184,1,{grid:0}),(n()(),P._8(0,null,null,5,"input",[["name","rows"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,i){var o=!0,l=n.component;if("input"===t){o=!1!==P._20(n,2)._handleInput(i.target.value)&&o}if("blur"===t){o=!1!==P._20(n,2).onTouched()&&o}if("compositionstart"===t){o=!1!==P._20(n,2)._compositionStart()&&o}if("compositionend"===t){o=!1!==P._20(n,2)._compositionEnd(i.target.value)&&o}if("ngModelChange"===t){o=!1!==(l.rows=i)&&o}return o},null,null)),P._6(16384,null,0,H.b,[P.G,P.k,[2,H.a]],null,null),P._21(1024,null,H.d,function(n){return[n]},[H.b]),P._6(671744,null,0,H.g,[[8,null],[8,null],[8,null],[2,H.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),P._21(2048,null,H.e,null,[H.g]),P._6(16384,null,0,H.f,[H.e],null,null),(n()(),P._24(null,["\n"])),(n()(),P._8(0,null,null,5,"input",[["name","cols"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,i){var o=!0,l=n.component;if("input"===t){o=!1!==P._20(n,9)._handleInput(i.target.value)&&o}if("blur"===t){o=!1!==P._20(n,9).onTouched()&&o}if("compositionstart"===t){o=!1!==P._20(n,9)._compositionStart()&&o}if("compositionend"===t){o=!1!==P._20(n,9)._compositionEnd(i.target.value)&&o}if("ngModelChange"===t){o=!1!==(l.cols=i)&&o}return o},null,null)),P._6(16384,null,0,H.b,[P.G,P.k,[2,H.a]],null,null),P._21(1024,null,H.d,function(n){return[n]},[H.b]),P._6(671744,null,0,H.g,[[8,null],[8,null],[8,null],[2,H.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),P._21(2048,null,H.e,null,[H.g]),P._6(16384,null,0,H.f,[H.e],null,null),(n()(),P._24(null,["\n\n"])),(n()(),P._8(0,null,null,5,"input",[["name","cols"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,i){var o=!0,l=n.component;if("input"===t){o=!1!==P._20(n,16)._handleInput(i.target.value)&&o}if("blur"===t){o=!1!==P._20(n,16).onTouched()&&o}if("compositionstart"===t){o=!1!==P._20(n,16)._compositionStart()&&o}if("compositionend"===t){o=!1!==P._20(n,16)._compositionEnd(i.target.value)&&o}if("ngModelChange"===t){o=!1!==(l.rowHeight=i)&&o}return o},null,null)),P._6(16384,null,0,H.b,[P.G,P.k,[2,H.a]],null,null),P._21(1024,null,H.d,function(n){return[n]},[H.b]),P._6(671744,null,0,H.g,[[8,null],[8,null],[8,null],[2,H.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),P._21(2048,null,H.e,null,[H.g]),P._6(16384,null,0,H.f,[H.e],null,null),(n()(),P._24(null,["\n\n\n"])),(n()(),P._8(0,null,null,1,"app-grid",[],null,[["window","resize"]],function(n,t,i){var o=!0;if("window:resize"===t){o=!1!==P._20(n,23).onResize(i.target)&&o}return o},e,x)),P._6(638976,[[1,4],["grid",4]],0,b,[P.k],{rows:[0,"rows"],cols:[1,"cols"],rowHeight:[2,"rowHeight"]},null),(n()(),P._24(null,["\n\n"])),(n()(),P._8(0,null,null,1,"button",[],null,[[null,"click"]],function(n,t,i){var o=!0,l=n.component;if("click"===t){o=!1!==l.addRow()&&o}return o},null,null)),(n()(),P._24(null,["Ajouter une ligne"])),(n()(),P._24(null,["\n\n"])),(n()(),P._8(0,null,null,13,"div",[["style","display: flex; "]],null,null,null,null,null)),(n()(),P._24(null,["\n\n  "])),(n()(),P._8(0,null,null,2,"article",[["appGridDraggable",""],["style","width: 50px"]],null,[[null,"dragstart"],[null,"dragend"]],function(n,t,i){var o=!0;if("dragstart"===t){o=!1!==P._20(n,31).onDragStart(i)&&o}if("dragend"===t){o=!1!==P._20(n,31).onDragEnd(i)&&o}return o},null,null)),P._6(16384,null,0,_,[P.k,P.G],{rows:[0,"rows"],cols:[1,"cols"],grid:[2,"grid"],appGridDraggable:[3,"appGridDraggable"]},null),(n()(),P._24(null,["\n    1x2\n  "])),(n()(),P._24(null,["\n\n  "])),(n()(),P._8(0,null,null,2,"article",[["appGridDraggable",""],["style","width: 50px"]],null,[[null,"dragstart"],[null,"dragend"]],function(n,t,i){var o=!0;if("dragstart"===t){o=!1!==P._20(n,35).onDragStart(i)&&o}if("dragend"===t){o=!1!==P._20(n,35).onDragEnd(i)&&o}return o},null,null)),P._6(16384,null,0,_,[P.k,P.G],{rows:[0,"rows"],cols:[1,"cols"],grid:[2,"grid"],appGridDraggable:[3,"appGridDraggable"]},null),(n()(),P._24(null,["\n    2x2\n  "])),(n()(),P._24(null,["\n\n  "])),(n()(),P._8(0,null,null,2,"article",[["appGridDraggable",""],["style","width: 50px"]],null,[[null,"dragstart"],[null,"dragend"]],function(n,t,i){var o=!0;if("dragstart"===t){o=!1!==P._20(n,39).onDragStart(i)&&o}if("dragend"===t){o=!1!==P._20(n,39).onDragEnd(i)&&o}return o},null,null)),P._6(16384,null,0,_,[P.k,P.G],{rows:[0,"rows"],cols:[1,"cols"],grid:[2,"grid"],appGridDraggable:[3,"appGridDraggable"]},null),(n()(),P._24(null,["\n    3x3\n  "])),(n()(),P._24(null,["\n\n"])),(n()(),P._24(null,["\n"]))],function(n,t){var i=t.component;n(t,4,0,"rows",i.rows);n(t,11,0,"cols",i.cols);n(t,18,0,"cols",i.rowHeight),n(t,23,0,i.rows,i.cols,i.rowHeight);n(t,31,0,1,2,P._20(t,23).grid,"");n(t,35,0,2,2,P._20(t,23).grid,"");n(t,39,0,3,3,P._20(t,23).grid,"")},function(n,t){n(t,1,0,P._20(t,6).ngClassUntouched,P._20(t,6).ngClassTouched,P._20(t,6).ngClassPristine,P._20(t,6).ngClassDirty,P._20(t,6).ngClassValid,P._20(t,6).ngClassInvalid,P._20(t,6).ngClassPending),n(t,8,0,P._20(t,13).ngClassUntouched,P._20(t,13).ngClassTouched,P._20(t,13).ngClassPristine,P._20(t,13).ngClassDirty,P._20(t,13).ngClassValid,P._20(t,13).ngClassInvalid,P._20(t,13).ngClassPending),n(t,15,0,P._20(t,20).ngClassUntouched,P._20(t,20).ngClassTouched,P._20(t,20).ngClassPristine,P._20(t,20).ngClassDirty,P._20(t,20).ngClassValid,P._20(t,20).ngClassInvalid,P._20(t,20).ngClassPending)})}function u(n){return P._25(0,[(n()(),P._8(0,null,null,1,"app-root",[],null,null,null,s,z)),P._6(49152,null,0,d,[],null,null)],null,null)}Object.defineProperty(t,"__esModule",{value:!0});var c,a={production:!0},g=function(){function n(){}return n}(),d=function(){function n(){this.cols=3,this.rows=3,this.rowHeight=40}return n.prototype.addRow=function(){this.grid.addRows()},n}(),p=["[appGridDraggable][_ngcontent-%COMP%]{background:#ccc;padding:20px}.moving[_ngcontent-%COMP%]{background-color:blue;opacity:.7}article[_ngcontent-%COMP%]{margin:10px}"],h=["section[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;box-sizing:border-box;border:1px solid green;position:relative;background-color:#ededed}section[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;border:1px solid hsla(0,0%,100%,.3);background-color:hsla(0,0%,80%,.3);box-sizing:border-box;transition:background .2s}section[_ngcontent-%COMP%]   article.hovered[_ngcontent-%COMP%]{background-color:#fffdd1}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;background-color:#c4b9b5;box-sizing:border-box;border:1px solid #0f4e80}"],f=i("/oeL"),_=function(){function n(n,t){this.el=n,this.renderer=t,this.rows=1,this.cols=2,this.el.nativeElement.draggable=!0}return n.prototype.onDragStart=function(n){var t=this;this.grid.movingItem=this.item||{size:{cols:this.cols,rows:this.rows}},this.renderer.addClass(this.el.nativeElement,"moving"),setTimeout(function(){t.renderer.setStyle(t.el.nativeElement,"visibility","hidden")},1)},n.prototype.onDragEnd=function(n){var t=this;this.renderer.removeClass(this.el.nativeElement,"moving"),this.grid.unHoverGrid(),setTimeout(function(){t.renderer.setStyle(t.el.nativeElement,"visibility","visible")},1)},n.ctorParameters=function(){return[{type:f.k},{type:f.G}]},n}(),m=function(){function n(){this.rows=3,this.cols=3,this.rowHeight=80}return n}();!function(n){n[n.Empty=0]="Empty",n[n.Occupated=1]="Occupated",n[n.Hovered=2]="Hovered"}(c||(c={}));var v=function(){function n(n){this.gridItems=[],this.gridConfig=n||new m,this.gridCellsOccupation=[],this.gridCellsHovered=[],this.initConfig(n)}return n.prototype.initConfig=function(n){this.gridConfig=Object.assign(new m,n),this.gridCellsOccupation=Array(this.config.rows),this.gridCellsHovered=Array(this.config.rows);for(var t=0;t<this.config.rows;t++){this.gridCellsOccupation[t]=Array(this.config.cols),this.gridCellsHovered[t]=Array(this.config.cols);for(var i=0;i<this.config.cols;i++)this.gridCellsOccupation[t][i]=!1,this.gridCellsHovered[t][i]=!1}return this.gridConfig},Object.defineProperty(n.prototype,"config",{get:function(){return this.gridConfig},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"items",{get:function(){return this.gridItems},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cellsOccupated",{get:function(){return this.gridCellsOccupation},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cells",{get:function(){for(var n=Array(this.config.rows),t=0;t<this.config.rows;t++){n[t]=Array(this.config.cols);for(var i=0;i<this.config.cols;i++)this.gridCellsHovered[t]&&this.gridCellsHovered[t][i]?n[t][i]=c.Hovered:this.gridCellsOccupation[t][i]?n[t][i]=c.Occupated:n[t][i]=c.Empty}return n},enumerable:!0,configurable:!0}),n.prototype.addRows=function(n){void 0===n&&(n=1),this.config.rows+=n;for(var t=0;t<n;t++)this.gridCellsOccupation.push(Array(this.config.cols).fill(!1)),this.gridCellsHovered.push(Array(this.config.cols).fill(!1))},n.prototype.addItem=function(t){var i=this;if(this.unHoverGrid(),!this.isItemSpotAvailable(t))throw new Error(n.error_overlap);this.movingItem.position?this.moveItem(this.movingItem,t.position):this.gridItems.push(t),this.reserveItemSpot(t),this.emptyGrid(),this.gridItems.forEach(function(n){i.reserveItemSpot(n)}),this.movingItem=null},n.prototype.removeItem=function(n){var t=this,i=this.gridItems.findIndex(function(n){return n.position.row===t.movingItem.position.row&&n.position.col===t.movingItem.position.col&&n.size.cols===t.movingItem.size.cols&&n.size.rows===t.movingItem.size.rows});this.gridItems.splice(i,1),this.emptyPositions(this.getPositionsListForItemSpot(n))},n.prototype.moveItem=function(n,t){n.position=t},n.prototype.isInGrid=function(n){return n.row<this.config.rows&&n.col<this.config.cols},n.prototype.getPositionsListForItemSpot=function(n){for(var t=[],i=0;i<n.size.rows;i++)for(var o=0;o<n.size.cols;o++){var l={row:n.position.row+i,col:n.position.col+o};t.push(l)}return t},n.prototype.reservePositions=function(n){var t=this;n.forEach(function(n){t.gridCellsOccupation[n.row][n.col]=!0})},n.prototype.hoverPositions=function(n){var t=this;this.gridCellsHovered&&(this.unHoverGrid(),n.forEach(function(n){t.gridCellsHovered[n.row]&&(t.gridCellsHovered[n.row][n.col]=!0)}))},n.prototype.emptyPositions=function(n){var t=this;n.forEach(function(n){t.gridCellsOccupation[n.row][n.col]=!1,t.gridCellsHovered[n.row][n.col]=!1})},n.prototype.unHoverPositions=function(n){var t=this;n.forEach(function(n){t.gridCellsHovered[n.row][n.col]=!1})},n.prototype.unHoverGrid=function(){this.unHoverPositions(this.getPositionsListForItemSpot({position:{row:0,col:0},size:{cols:this.config.cols,rows:this.config.rows}}))},n.prototype.emptyGrid=function(){this.emptyPositions(this.getPositionsListForItemSpot({position:{row:0,col:0},size:{cols:this.config.cols,rows:this.config.rows}}))},n.prototype.reserveItemSpot=function(n){this.reservePositions(this.getPositionsListForItemSpot(n))},n.prototype.isPositionAvailable=function(n){return!1===this.cellsOccupated[n.row][n.col]},n.prototype.isItemSpotAvailable=function(n){var t=this;console.log(" movingItem ",this.movingItem),this.movingItem&&this.movingItem.position&&this.emptyPositions(this.getPositionsListForItemSpot(this.movingItem));var i=this.getPositionsListForItemSpot(n).every(function(n){return t.isInGrid(n)&&t.isPositionAvailable(n)});return this.emptyGrid(),this.gridItems.forEach(function(n){t.reserveItemSpot(n)}),i},n.prototype.cellType=function(n){var t="empty";if(!this.cells||!this.cells[n.row]||!this.cells[n.row][n.col])return t;switch(this.cells[n.row][n.col]){case c.Occupated:t="occupated";break;case c.Hovered:t="hovered"}return t},n.prototype.hoverItemSpot=function(n){this.hoverPositions(this.getPositionsListForItemSpot(n))},n.prototype.isLastLineEmpy=function(){return!this.cellsOccupated[this.config.rows-1].some(function(n){return!0===n})},n}();v.error_overlap="cannot add grid item: overlap";var w=i("/oeL"),b=function(){function n(n){this.elementRef=n,this.rows=3,this.cols=3,this.rowHeight=40,this.gridPositions=[]}return n.prototype.onResize=function(){this.calculComponentWidth()},n.prototype.addRows=function(n){void 0===n&&(n=1),this.grid.addRows(n),this.rows+=n,this.containerHeight=this.rows*this.rowHeight,this.gridPositions=this.grid.getPositionsListForItemSpot({position:{row:0,col:0},size:{cols:this.cols,rows:this.rows}})},n.prototype.initGrid=function(){this.grid=new v({cols:this.cols,rows:this.rows,rowHeight:this.rowHeight}),this.containerHeight=this.rows*this.rowHeight,this.gridPositions=this.grid.getPositionsListForItemSpot({position:{row:0,col:0},size:{cols:this.cols,rows:this.rows}})},n.prototype.onDragHover=function(n,t,i){return this.grid.hoverItemSpot({position:n,size:this.grid.movingItem.size}),!1},n.prototype.onDrop=function(n,t,i){this.grid.addItem({position:n,size:this.grid.movingItem.size}),this.grid.isLastLineEmpy()||this.addRows(3)},n.prototype.onClick=function(n,t,i){this.grid.removeItem({position:n,size:this.grid.movingItem.size})},n.prototype.calculComponentWidth=function(){this.gridWidth=this.gridView.nativeElement.getBoundingClientRect().width},n.prototype.ngOnInit=function(){this.initGrid(),this.calculComponentWidth()},n.prototype.ngOnChanges=function(n){this.initGrid()},n.ctorParameters=function(){return[{type:w.k}]},n}(),y=i("/oeL"),C=i("qbdv"),I=[h],x=y._5({encapsulation:0,styles:I,data:{}}),P=(y._3("app-grid",b,r,{rows:"rows",cols:"cols",rowHeight:"rowHeight"},{},[]),i("/oeL")),H=i("bm2B"),O=[p],z=P._5({encapsulation:0,styles:O,data:{}}),G=P._3("app-root",d,u,{},{},[]),D=i("/oeL"),k=i("qbdv"),S=i("fc+i"),E=i("bm2B"),M=D._4(g,[d],function(n){return D._18([D._19(512,D.i,D._0,[[8,[G]],[3,D.i],D.x]),D._19(5120,D.v,D._17,[[3,D.v]]),D._19(4608,k.f,k.e,[D.v]),D._19(4608,D.h,D.h,[]),D._19(5120,D.a,D._9,[]),D._19(5120,D.t,D._14,[]),D._19(5120,D.u,D._15,[]),D._19(4608,S.b,S.s,[k.b]),D._19(6144,D.J,null,[S.b]),D._19(4608,S.e,S.f,[]),D._19(5120,S.c,function(n,t,i,o){return[new S.k(n),new S.o(t),new S.n(i,o)]},[k.b,k.b,k.b,S.e]),D._19(4608,S.d,S.d,[S.c,D.z]),D._19(135680,S.m,S.m,[k.b]),D._19(4608,S.l,S.l,[S.d,S.m]),D._19(6144,D.H,null,[S.l]),D._19(6144,S.p,null,[S.m]),D._19(4608,D.O,D.O,[D.z]),D._19(4608,S.g,S.g,[k.b]),D._19(4608,S.i,S.i,[k.b]),D._19(4608,E.i,E.i,[]),D._19(512,k.a,k.a,[]),D._19(1024,D.l,S.q,[]),D._19(1024,D.b,function(n,t){return[S.r(n,t)]},[[2,S.h],[2,D.y]]),D._19(512,D.c,D.c,[[2,D.b]]),D._19(131584,D._7,D._7,[D.z,D._1,D.r,D.l,D.i,D.c]),D._19(2048,D.e,null,[D._7]),D._19(512,D.d,D.d,[D.e]),D._19(512,S.a,S.a,[[3,S.a]]),D._19(512,E.h,E.h,[]),D._19(512,E.c,E.c,[]),D._19(512,g,g,[])])}),L=i("/oeL"),F=i("fc+i");a.production&&Object(L.U)(),Object(F.j)().bootstrapModuleFactory(M)},gFIY:function(n,t){function i(n){return new Promise(function(t,i){i(new Error("Cannot find module '"+n+"'."))})}i.keys=function(){return[]},i.resolve=i,n.exports=i,i.id="gFIY"}},[0]);